!function(e){e.fn.selectopoly=function(){e(this).each(function(){var t={_dom:{original:null,group:null,template:null},init:function(t){var o=this;o._dom.original=e(t),o._dom.group=e("<span />").addClass("selectopoly").addClass("repeater-group"),o._dom.group.insertAfter(o._dom.original).append(o._dom.original),o._dom.template=e("<span />").addClass("form-group").addClass("repeater");var a=o._dom.original.clone().removeAttr("multiple name id size");a.find("option[selected]").removeAttr("selected"),a.find('option[value=""]').length<=0&&a.prepend('<option value="">Selectâ€¦</option>'),o._dom.template.append(a);var n=o._dom.original.val()||[];n.push("");for(var r in n){var i=o._addNewField();i.find("select").val(n[r]),o._updateRemovalButtons()}o._dom.group.on("change","select:not([multiple])",function(){o._updateFieldValues(o._dom.group),""!==o._dom.group.find("select:not([multiple]):last").val()&&(o._addNewField(),o._updateRemovalButtons())}),o._dom.group.on("click",".repeater-remove",function(){e(this).parents(".form-group.repeater").first().remove(),o._updateFieldValues(),o._updateRemovalButtons()}),o._dom.original.hide()},_addNewField:function(){return this._dom.template.clone().appendTo(this._dom.group)},_updateFieldValues:function(){var t=[];this._dom.group.find(".form-group.repeater select").each(function(){t.push(e(this).val())}),this._dom.group.find("select[multiple]").val(t)},_updateRemovalButtons:function(){var t=this._dom.group.find(".form-group.repeater"),o=t.last();t.each(function(){e(this).is(o)?e(this).has(".repeater-remove").length>0&&e(this).find(".repeater-remove").remove():(e(this).find('option[value=""]').remove(),0===e(this).has(".repeater-remove").length&&e(this).append('<a href="#" class="repeater-remove">Remove</a>'))})},_version:"1.0"};return t.init(this)})}}(jQuery),function(){var e=jQuery,t=document.getElementsByTagName("script");t[t.length-1].src.indexOf("?auto")>-1&&e().ready(function(){e("select[multiple]").selectopoly()})}();