!function($){$.fn.selectopoly=function(){$(this).each(function(){var e={_dom:{original:null,group:null,template:null},init:function(e){var t=this;t._dom.original=$(e),t._dom.group=$("<span />").addClass("selectopoly").addClass("repeater-group"),t._dom.group.insertAfter(t._dom.original).append(t._dom.original),t._dom.template=$("<span />").addClass("form-group").addClass("repeater");var o=t._dom.original.clone().removeAttr("required multiple name id size");o.find("option[selected]").removeAttr("selected"),o.find('option[value=""]').length<=0&&o.prepend('<option value="">Selectâ€¦</option>'),t._dom.template.append(o);var r=t._dom.original.val()||[];r.push("");for(var i in r){var a=t._addNewField();a.find("select").val(r[i]),t._updateRemovalButtons(),t._updateRequiredFlag()}t._dom.group.on("change","select:not([multiple])",function(){t._updateFieldValues(t._dom.group),""!==t._dom.group.find("select:not([multiple]):last").val()&&(t._addNewField(),t._updateRemovalButtons(),t._updateRequiredFlag())}),t._dom.group.on("click",".repeater-remove",function(){$(this).parents(".form-group.repeater").first().remove(),t._updateFieldValues(),t._updateRemovalButtons(),t._updateRequiredFlag()}),t._dom.original.hide()},_addNewField:function(){return this._dom.template.clone().appendTo(this._dom.group)},_updateFieldValues:function(){var e=[];this._dom.group.find(".form-group.repeater select").each(function(){e.push($(this).val())}),this._dom.group.find("select[multiple]").val(e)},_updateRemovalButtons:function(){var e=this._dom.group.find(".form-group.repeater"),t=e.last();e.each(function(){$(this).is(t)?$(this).has(".repeater-remove").length>0&&$(this).find(".repeater-remove").remove():($(this).find('option[value=""]').remove(),0===$(this).has(".repeater-remove").length&&$(this).append('<a href="#" class="repeater-remove">Remove</a>'))})},_updateRequiredFlag:function(){var e=this._dom.group.find(".form-group.repeater select"),t=e.filter(function(){return""===$(this).val()});e.length===t.length?e.first().attr({required:"required"}):e.first().removeAttr("required")},_version:"1.0"};return e.init(this)})}}(jQuery),function(){var $=jQuery,e=document.getElementsByTagName("script");e[e.length-1].src.indexOf("?auto")>-1&&$().ready(function(){$("select[multiple]").selectopoly()})}();